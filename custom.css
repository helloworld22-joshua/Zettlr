/* C:\Users\joshu\AppData\Roaming\Zettlr\images */
:root {
  /* --system-accent-color: #1f94d6;
  --system-accent-color-contrast: #333; */
  /* --background-image: linear-gradient(160deg, #03001e, #7303c0, #ec38bc, #fdeff9); */
  --background-image: url("images/SWColorado.jpg");
  --background-color: #333;
  --background-color-transparent: #3338;
  --background-color-transparent-active: #ccc4;
  --editor-background-color: #111c;
  --blur: blur(10px);
  --color-gradient: linear-gradient(45deg, #7303c0, var(--system-accent-color));
  --border-radius: 8px;
  --border-radius-small: 4px;
  --editor-blur: blur(20px);
  --text-shadow: 1px 1px 2px rgba(0,0,0,0.5)
}

/*** Makes this editor more usable ***/
#custom-css * {
  caret-color: red/* var(--system-accent-color) */;
}

/*** General Changes ***/
/* Text shadow */
#component-container, #sidebar-tab-container, .tab-container .filename {
  text-shadow: var(--text-shadow);
}

/* Selection and cursor */
.cm-selectionBackground, .cm-cursor-primary { /* TODO: Doesn't work in table + border-radius + dif. color */
  border-radius: var(--border-radius-small);
  /* background-image: var(--color-gradient) !important; */
  background-color: red !important;
}

/*** Basic styling ***/
/* Toolbar */
#toolbar {
  height: 2.2rem !important;
  padding-right: 4px !important; /* TODO: Looks odd on Windows */
  gap: 0 !important;
}

#toolbar *, .application-menu, .popover {
  border-radius: var(--border-radius) !important;
}

#toolbar-toggle-file-manager > *, .toolbar-group > * {
  width: 2.3rem;
  height: 1.7rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

#toolbar-toggle-file-manager {
  display: flex; /* TODO: Windows only? */
}

#toolbar .spacer-1x {
  flex-grow: 0 !important;
}

#toolbar .spacer-3x {
  min-width: 3rem; /* TODO: No effect on Windows */
}

#toolbar .toolbar-text {
  width: auto !important;
}

/* Background */
#window-content {
  background-image: var(--background-image);
  background-size: cover;
  background-position: center; 
}

.view {
  border: none !important;
  border-radius: var(--border-radius);
}

.editor-pane {
  background-color: var(--editor-background-color) !important;
  backdrop-filter: var(--editor-blur);
}

.main-editor-wrapper {
  background: none !important;
}

.empty-pane {
  background-color: transparent !important;
}

/* File manager */
.file-manager-filter { /* TODO: Windows only? */
  height: 25px !important;
  overflow: hidden; /* Changes on Windows */
  border: none !important; /* Changes on Windows */
  border-radius: var(--border-radius); /* Changes on Windows */
}

.file-manager-filter-input { /* TODO: Windows only? */
  height: 100% !important; /* Changes on Windows */
  background-color: var(--background-color-transparent) !important; /* Changes on Windows */
  backdrop-filter: var(--blur); /* Changes on Windows */
}

.display-text {
  border-radius: var(--border-radius-small);
}

/* System tablist */
.system-tablist {
  height: 25px;
  padding: 0 !important; /* TODO: No effect on Windows */
  border-radius: var(--border-radius);
  background-color: var(--background-color-transparent) !important;
  backdrop-filter: var(--blur);
}

.system-tab {
  display: flex;
  justify-content: center;
  align-items: center;
  border: none !important; /* TODO: Windows only? */
  background: none !important; /* TODO: Windows only? */
}

.system-tab.active {
  background-color: var(--background-color-transparent-active) !important;
  border-radius: var(--border-radius) !important;
}

/* Tabs */
.tab-container { /* TODO: Shadow or line for separation? */
  height: 33px !important; /* TODO: Close button not centered otherwise */
  background: none !important;
  border: none !important; /* TODO: No effect on Windows */
  /* box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.5); */
}

.tab-container div[role="tab"] { 
  max-width: 200px; /* TODO: Check if needed for Windows otherwise delete: Not needed! */
  margin: 1px;
  padding-left: 25px !important; /* TODO: Windows only, problems on Mac? */
  font-size: 13px !important;
  align-items: center; /* TODO: No effect on Windows */
  background: none !important; /* TODO: No effect on Windows */
  border: none !important;
  border-radius: var(--border-radius);
  box-shadow: none !important; /* TODO: It's barely noticable. Needed? */
}

.tab-container div[role="tab"].active {
  background-color: var(--system-accent-color) !important;
}

.tab-container div[role="tab"]:not(.active):hover {
  background-color: var(--background-color-transparent) !important;
}

.tab-container .close {
  font-size: 0 !important;
  background: none !important;
}

.tab-container div[role="tab"] .close::before {
  content: "✕";
  font-size: 15px !important;
  opacity: 0;
  transition: .2s color ease, .2s opacity ease;
}

.tab-container div[role="tab"]:hover .close::before {
  opacity: 1;
}

.tab-container .close:hover::before {
  color: red;
}

/* Gutter */
.cm-gutterElement > span {
  visibility: hidden;
}

.cm-gutterElement:first-child {
  display: none !important;
}

.cm-gutterElement > span[title="Fold line"]::before {
  content: "▼";
  visibility: visible;
}

.cm-gutterElement > span[title="Unfold line"]::before {
  content: "▶︎";
  visibility: visible;
}

/* Statusbar at bottom */
.cm-panels, .cm-statusbar {
  background: none !important;
}

/*** Inside Editor ***/
/* Highlight with accent color */
.cm-code-mark, .cm-url, .cm-link, .cm-code-mark, .cm-zkn-tag, .cm-zkn-link {
  color: var(--system-accent-color) !important;
}

/* Tables */
table { /* Is there a better way? */
  border-radius: var(--border-radius) !important;
  overflow: hidden !important;
}

.table-helper-add-button {
  transition: .2s all ease; /* TODO: Something buggy. Maybe only opacity and scale */
}

.table-helper-add-button:hover {
  opacity: .5;
  scale: 1.5;
}

/* Highlighted text */
.cm-highlight, mark {
  background-image: linear-gradient(to right, yellow, lime); /* TODO: Multiline ok on Mac? */
  color: #111;
  border-radius: var(--border-radius-small); /* TODO: Yes or no? */
}

/* Images */
img {
  border-radius: var(--border-radius);
}

/* Mac specific styling */
#file-manager {
  border-top: none !important;
}

/* Windows specific styling */
body.win32.dark #file-tree, body.win32.dark #sidebar {
  background: none !important;
}

#menubar {
  /* height: 1px; */ /* TODO: Experiment with almost hidden menubar */
  background-image: url("images/logo.png");
  /* transition: .2s height ease; */
}

#menubar * {
  border-radius: var(--border-radius-small);
}

/* #toolbar:hover ~ #menubar {
  height: 31px;
  background-color: red !important;
} */

/* #menubar:hover {
  height: 31px;
  background-color: red !important;
} */

.application-menu, .popover {
  background-color: #333b !important;
  backdrop-filter: var(--blur);
}

/* WIP */
#toolbar-document-info * {
  white-space: nowrap;
}

.file-manager-filter, .system-tablist {
  margin: .5rem/*  auto */;
  /* min-width: 150px;
  max-width: 300px; */
}

/* .form-control *, .popover button {
  border-radius: var(--border-radius) !important;
  border: none !important;
  background-color: var(--background-color-transparent) !important;
} */

::-webkit-scrollbar {
  width: 0px;
  height: 0px;
}

::-webkit-scrollbar-button {
  display: none !important;
}

::-webkit-scrollbar-track {
  background-color: #14141e;
}

::-webkit-scrollbar-thumb {
  background-image: linear-gradient(45deg, #7303c0, #ec38bc);
  border-radius: 8px;
}
